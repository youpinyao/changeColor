webpackJsonp([0],{0:function(t,e,a){t.exports=a("f1WI")},f1WI:function(t,e,a){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}a("W/N8");var n=a("MYwM"),i=o(n),r=a("lVK7"),c=o(r);console.log(c["default"]);var s=document.getElementById("image").src,u=new c["default"]({imageUrl:s});new i["default"]({color:"#ff0000",background:"#000000",el:document.getElementById("color"),width:200,height:200}).onChange(function(t){u.setColor(t).then(function(t){document.getElementById("image").setAttribute("src",t)})})},lVK7:function(t,e,a){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("A/Xc"),r=o(i),c=a("9Otz"),s=o(c),u=function(){function t(e){var a=e.imageUrl;n(this,t),this.imageUrl=a}return t.prototype.defer=function(){var t={},e=new r["default"](function(e,a){t.resolve=e,t.reject=a});return t.promise=e,t},t.prototype.setColor=function(t){var e=this,a=this.defer(),o=(0,s["default"])(t);return this.loadImage().then(function(t){e.drawCanvas(t).then(function(t){var n=t.ctx,i=t.imageData,r=[],c=0;i.data.forEach(function(t,e){e%4==0&&(r.push([]),c=0),r[r.length-1][c]=t,c++}),r.forEach(function(t,e){0===t[0]&&0===t[1]&&0===t[2]&&0===t[3]||(r[e]=o.color.concat(255*o.valpha))}),r.forEach(function(t,e){t.forEach(function(t,a){i.data[4*e+a]=t})}),e.setImageData(i),a.resolve(n.canvas.toDataURL())})}),a.promise},t.prototype.setImageData=function(t){this._imageData=t,this._ctx.putImageData(t,0,0,0,0,this._loadedImage.width,this._loadedImage.height)},t.prototype.drawCanvas=function(t){var e=this,a=this.defer();if(this._ctx)return setTimeout(function(){a.resolve({imageData:e._imageData,ctx:e._ctx})}),a.promise;var o=document.createElement("canvas"),n=o.getContext("2d");return this._canvas=o,this._ctx=n,o.setAttribute("width",t.width),o.setAttribute("height",t.height),n.drawImage(t,0,0,t.width,t.height,0,0,t.width,t.height),this._imageData=n.getImageData(0,0,t.width,t.height),a.resolve({imageData:this._imageData,ctx:this._ctx}),a.promise},t.prototype.loadImage=function(){var t=this,e=this.imageUrl,a=this.defer(),o=new window.Image;return this._loadedImage?(setTimeout(function(){a.resolve(t._loadedImage)}),a.promise):(o.onload=function(){a.resolve(o),t._loadedImage=o},o.onerror=function(){a.reject()},o.src=e,a.promise)},t}();window.ChangeColor=u,e["default"]=u}},[0]);